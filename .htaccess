# If Git OVH deploys in /www and repo has www/, redirect to www/www
RewriteEngine On

# If we're at root /www/, redirect to /www/www/
RewriteCond %{REQUEST_URI} ^/www/?$
RewriteRule ^(.*)$ /www/www/ [L,R=301]

# If accessing files in /www/ but not /www/www/, redirect
RewriteCond %{REQUEST_URI} ^/www/(?!www/)(.*)$
RewriteRule ^www/(.*)$ /www/www/$1 [L,R=301]

# Block access to sensitive files and directories
<FilesMatch "^(\.env|\.git|composer\.(json|lock)|\.gitignore|README\.md|.*\.md)$">
    Require all denied
</FilesMatch>

# Block directory listing
Options -Indexes
